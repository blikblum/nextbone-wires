{"version":3,"sources":["webpack:///./src/colors/index/paging-bar.js","webpack:///./node_modules/nextbone/virtualcollection.js","webpack:///./src/colors/index/virtualState.js","webpack:///./src/colors/index/colors-view.js","webpack:///./src/colors/model.js","webpack:///./src/colors/collection.js","webpack:///./src/colors/storage.js","webpack:///./src/colors/index/route.js","webpack:///./src/colors/show/color-view.js","webpack:///./src/colors/show/route.js","webpack:///./src/colors/edit/color-edit-view.js","webpack:///./src/colors/edit/route.js","webpack:///./src/colors/route.js","webpack:///./src/colors/create/route.js"],"names":["customElements","define","Component","properties","count","type","Number","start","limit","calculateValues","total","Math","ceil","this","current","pages","_","times","index","page","prev","next","render","html","map","item","Boolean","explicitlyHandledEvents","clone","obj","Object","assign","buildFilter","options","underscore_underscore","constructor","model","keys","every","key","get","virtualcollection_VirtualCollection","nextbone","[object Object]","parent","super","destroyWith","filter","listenTo","stopListening","_clearChangesCache","accepts","acceptModel","_parent","value","_rebuildIndex","_onAdd","_onRemove","_onChange","_onReset","_onFilter","_onSort","_onUpdate","_proxyParentEvents","trigger","models","forEach","off","_onAllEvent","_reset","each","i","push","_byId","cid","id","length","comparator","sort","silent","undefined","collection","orderViaParent","events","eventName","args","_changeCache","added","removed","merged","newOptions","changes","_indexAdd","_indexRemove","optionsClone","alreadyHere","context","iterator","target","bind","array","low","high","mid","call","sortedIndexTwo","sortedIndex","indexOf","splice","apply","arguments","methodName","prototype","method","isClassDecorated","Symbol","bindVirtualCollection","el","virtualCollection","requestUpdate","ensureViewClass","ElementClass","ViewClass","connectedCallback","virtualStates","__virtualStates","name","disconnectedCallback","Events","extend","registerVirtualState","ctor","Set","add","desc","set","Collection","Error","VirtualCollection","isFunction","isConnected","configurable","enumerable","defineProperty","createProperty","noAccessor","virtualState","optionsOrProtoOrDescriptor","fieldName","isLegacy","kind","protoOrDescriptor","placement","descriptor","initializer","finisher","ColorItem","hex","attributes","ColorsView","_Component","_initialize","property","color","lastIndex","colors","updateFilter","changedProperties","has","updateState","_get","_getPrototypeOf","Color","localStorage","_Model","active","attrs","errors","Model","collection_class","Backbone","_defineProperty","ColorsStorage","Storage","storage","route","_Route","F","d","static","decorators","elProperty","transition","pageParam","query","parseFloat","findAll","then","Route","ColorView","state","event","save","catch","handleToggleFailure","previous","ModalService","confirm","title","text","confirmed","nprogress","destroy","wait","handleDestroySuccess","Radio","channel","request","FlashesService","timeout","body","show_route","colorModel","find","params","colorid","ColorEditView","formBind","copy","e","preventDefault","isValid","validationError","pristine","isNew","isEqual","omit","edit_route","View","hasUnsavedChanges","yes","no","cancel","elEvent","dom","$router","transitionTo","route_class","activate","ajaxSync","colors.index","ColorsIndexRoute","colors.show","ColorsShowRoute","colors.edit","ColorsEditRoute","colors.create","ColorEditRoute"],"mappings":"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","file":"1.bundle.js","sourcesContent":["import { Component } from 'component'\r\nimport _ from 'underscore'\r\nimport { html } from 'lit-html'\r\n\r\nclass PagingBar extends Component {\r\n  static get properties() {\r\n    return {\r\n      count: { type: Number },\r\n      start: { type: Number },\r\n      limit: { type: Number },\r\n    }\r\n  }\r\n\r\n  calculateValues() {\r\n    const total = Math.ceil(this.count / this.limit)\r\n    const current = Math.ceil(this.start / this.limit) + 1\r\n\r\n    const pages = _.times(total, index => ({\r\n      current: index + 1 === current,\r\n      page: index + 1,\r\n    }))\r\n\r\n    const prev = current - 1 > 0 ? current - 1 : false\r\n    const next = current < total ? current + 1 : false\r\n\r\n    return { total, current, pages, prev, next }\r\n  }\r\n\r\n  render() {\r\n    const { pages, prev, next } = this.calculateValues()\r\n    return html`\r\n      <div class=\"text-center\">\r\n        <ul class=\"pagination\">\r\n          ${prev\r\n            ? html`\r\n                <li class=\"page-item\">\r\n                  <a class=\"page-link\" href=${'#colors?page=' + prev}>«</a>\r\n                </li>\r\n              `\r\n            : html`\r\n                <li class=\"page-item disabled\"><a class=\"page-link\">«</a></li>\r\n              `}\r\n          ${pages.map(\r\n            item =>\r\n              html`\r\n                ${Boolean(item.current)\r\n                  ? html`\r\n                      <li class=\"active page-item\">\r\n                        <a class=\"page-link\">${item.page} <span class=\"sr-only\">(current)</span></a>\r\n                      </li>\r\n                    `\r\n                  : html`\r\n                      <li class=\"page-item\">\r\n                        <a class=\"page-link\" href=${'#colors?page=' + item.page}>${item.page}</a>\r\n                      </li>\r\n                    `}\r\n              `,\r\n          )}\r\n          ${next\r\n            ? html`\r\n                <li class=\"page-item\">\r\n                  <a class=\"page-link\" href=${'#colors?page=' + next}>»</a>\r\n                </li>\r\n              `\r\n            : html`\r\n                <li class=\"disabled page-item\"><a class=\"page-link\">»</a></li>\r\n              `}\r\n        </ul>\r\n      </div>\r\n    `\r\n  }\r\n}\r\n\r\ncustomElements.define('paging-bar', PagingBar)\r\n","import { Collection } from './nextbone';\r\nimport { isFunction, sortedIndex, extend } from 'underscore';\r\n\r\nvar explicitlyHandledEvents = ['add', 'remove', 'change', 'reset', 'sort'];\r\n\r\nvar clone = function(obj) {\r\n  return obj ? Object.assign({}, obj) : {};\r\n};\r\n\r\nvar buildFilter = function(options) {\r\n  if (!options) {\r\n    return function() {\r\n      return true;\r\n    };\r\n  } else if (isFunction(options)) {\r\n    return options;\r\n  } else if (options.constructor === Object) {\r\n    return function(model) {\r\n      return Object.keys(options).every(function(key) {\r\n        return model.get(key) === options[key];\r\n      });\r\n    };\r\n  }\r\n};\r\n\r\nclass VirtualCollection extends Collection {\r\n  constructor(parent, options = {}) {\r\n    super(null, options);\r\n    const { destroyWith, filter } = options;\r\n\r\n    if (destroyWith) this.listenTo(destroyWith, 'destroy', this.stopListening);\r\n    this._clearChangesCache();\r\n\r\n    this.accepts = buildFilter(filter || this.acceptModel);\r\n    this.parent = parent;\r\n  }\r\n\r\n  get parent() {\r\n    return this._parent;\r\n  }\r\n\r\n  set parent(value) {\r\n    if (value == this._parent) return;\r\n    if (this._parent) this.stopListening();\r\n    this._parent = value;\r\n    if (value) {\r\n      if (value.constructor.model) this.model = value.constructor.model;\r\n      this._rebuildIndex();\r\n      this.listenTo(value, 'add', this._onAdd);\r\n      this.listenTo(value, 'remove', this._onRemove);\r\n      this.listenTo(value, 'change', this._onChange);\r\n      this.listenTo(value, 'reset', this._onReset);\r\n      this.listenTo(value, 'filter', this._onFilter);\r\n      this.listenTo(value, 'sort', this._onSort);\r\n      this.listenTo(value, 'update', this._onUpdate);\r\n      this._proxyParentEvents(value, ['sync', 'request', 'error']);\r\n    }\r\n  }\r\n\r\n  updateFilter(filter) {\r\n    if (filter) {\r\n      this.accepts = buildFilter(filter);\r\n    }\r\n    this._rebuildIndex();\r\n    this.trigger('filter', this, filter);\r\n    this.trigger('reset', this, filter);\r\n    return this;\r\n  }\r\n\r\n  _rebuildIndex() {\r\n    this.models.forEach(model => model.off('all', this._onAllEvent, this));\r\n    this._reset();\r\n    this._parent.each((model, i) => {\r\n      if (this.accepts(model, i)) {\r\n        this.listenTo(model, 'all', this._onAllEvent);\r\n        this.models.push(model);\r\n        this._byId[model.cid] = model;\r\n        if (model.id) this._byId[model.id] = model;\r\n      }\r\n    });\r\n    this.length = this.models.length;\r\n\r\n    if (this.comparator) this.sort({ silent: true });\r\n  }\r\n\r\n  orderViaParent(options) {\r\n    this.models = this._parent.filter(model => {\r\n      return this._byId[model.cid] !== undefined;\r\n    });\r\n    if (!options.silent) this.trigger('sort', this, options);\r\n  }\r\n\r\n  _onSort(collection, options) {\r\n    if (this.comparator !== undefined) return;\r\n    this.orderViaParent(options);\r\n  }\r\n\r\n  _proxyParentEvents(collection, events) {\r\n    events.forEach(eventName => {\r\n      this.listenTo(collection, eventName, (...args) => this.trigger(eventName, ...args));\r\n    });\r\n  }\r\n\r\n  _clearChangesCache() {\r\n    this._changeCache = {\r\n      added: [],\r\n      removed: [],\r\n      merged: []\r\n    };\r\n  }\r\n\r\n  _onUpdate(collection, options) {\r\n    var newOptions = extend({}, options, { changes: this._changeCache });\r\n    this.trigger('update', this, newOptions);\r\n    this._clearChangesCache();\r\n  }\r\n\r\n  _onAdd(model, collection, options) {\r\n    if (this.get(model) || !this.accepts(model, options.index)) return;\r\n    this._changeCache.added.push(model);\r\n    this._indexAdd(model);\r\n    this.listenTo(model, 'all', this._onAllEvent);\r\n    this.trigger('add', model, this, options);\r\n    if (this.comparator !== undefined) {\r\n      this.trigger('sort', this, options);\r\n    }\r\n  }\r\n\r\n  _onRemove(model, collection, options) {\r\n    if (!this.get(model)) return;\r\n    this._changeCache.removed.push(model);\r\n    var i = this._indexRemove(model),\r\n      optionsClone = clone(options);\r\n    optionsClone.index = i;\r\n    model.off('all', this._onAllEvent, this);\r\n    this.trigger('remove', model, this, optionsClone);\r\n  }\r\n\r\n  _onChange(model, options) {\r\n    if (!model || !options) return; // ignore malformed arguments coming from custom events\r\n    var alreadyHere = this.get(model);\r\n\r\n    if (this.accepts(model, options.index)) {\r\n      if (alreadyHere) {\r\n        if (!this._byId[model.id] && model.id) {\r\n          this._byId[model.id] = model;\r\n        }\r\n        this.trigger('change', model, this, options);\r\n      } else {\r\n        this._onAdd(model, this._parent, options);\r\n      }\r\n    } else if (alreadyHere) {\r\n      var i = this._indexRemove(model),\r\n        optionsClone = clone(options);\r\n      optionsClone.index = i;\r\n      this.trigger('remove', model, this, optionsClone);\r\n    }\r\n  }\r\n\r\n  _onReset(collection, options) {\r\n    this._rebuildIndex();\r\n    this.trigger('reset', this, options);\r\n  }\r\n\r\n  _onFilter(collection, options) {\r\n    this._rebuildIndex();\r\n    this.trigger('filter', this, options);\r\n  }\r\n\r\n  sortedIndex(model, value, context) {\r\n    var iterator = isFunction(value)\r\n      ? value\r\n      : function(target) {\r\n          return target.get(value);\r\n        };\r\n\r\n    if (iterator.length === 1) {\r\n      return sortedIndex(this.models, model, iterator.bind(context));\r\n    }\r\n    return sortedIndexTwo(this.models, model, iterator, context);\r\n  }\r\n\r\n  _indexAdd(model) {\r\n    if (this.get(model)) return;\r\n    var i;\r\n    // uses a binsearch to find the right index\r\n    if (this.comparator) {\r\n      i = this.sortedIndex(model, this.comparator, this);\r\n    } else if (this.comparator === undefined) {\r\n      i = this.sortedIndex(\r\n        model,\r\n        function(target) {\r\n          //TODO: indexOf traverses the array every time the iterator is called\r\n          return this._parent.indexOf(target);\r\n        },\r\n        this\r\n      );\r\n    } else {\r\n      i = this.length;\r\n    }\r\n    this.models.splice(i, 0, model);\r\n    this._byId[model.cid] = model;\r\n    if (model.id) this._byId[model.id] = model;\r\n    this.length += 1;\r\n  }\r\n\r\n  _indexRemove(model) {\r\n    model.off('all', this._onAllEvent, this);\r\n    var i = this.indexOf(model);\r\n    if (i === -1) return i;\r\n    this.models.splice(i, 1);\r\n    delete this._byId[model.cid];\r\n    if (model.id) delete this._byId[model.id];\r\n    this.length -= 1;\r\n    return i;\r\n  }\r\n\r\n  _onAllEvent(eventName) {\r\n    if (explicitlyHandledEvents.indexOf(eventName) === -1) {\r\n      this.trigger.apply(this, arguments);\r\n    }\r\n  }\r\n\r\n  clone() {\r\n    return new this._parent.constructor(this.models);\r\n  }\r\n}\r\n\r\n// methods that alter data should proxy to the parent collection\r\n\r\n[\r\n  'add',\r\n  'remove',\r\n  'set',\r\n  'reset',\r\n  'push',\r\n  'pop',\r\n  'unshift',\r\n  'shift',\r\n  'slice',\r\n  'sync',\r\n  'fetch',\r\n  'url'\r\n].forEach(function(methodName) {\r\n  VirtualCollection.prototype[methodName] = function() {\r\n    var method = this._parent[methodName];\r\n    if (isFunction(method)) {\r\n      return method.apply(this._parent, arguments);\r\n    }\r\n    return method;\r\n  };\r\n});\r\n\r\n/**\r\n\r\nEquivalent to sortedIndex, but for comparators with two arguments\r\n\r\n**/\r\nfunction sortedIndexTwo(array, obj, iterator, context) {\r\n  var low = 0,\r\n    high = array.length;\r\n  while (low < high) {\r\n    var mid = (low + high) >>> 1;\r\n    iterator.call(context, obj, array[mid]) > 0 ? (low = mid + 1) : (high = mid);\r\n  }\r\n  return low;\r\n}\r\n\r\nexport { VirtualCollection, buildFilter };\r\n","import { Collection, Events } from 'nextbone'\r\nimport { VirtualCollection } from 'nextbone/virtualcollection'\r\nimport { isFunction } from 'underscore'\r\n\r\nconst isClassDecorated = Symbol('VirtualStateClass')\r\n\r\nconst bindVirtualCollection = (el, virtualCollection) => {\r\n  el.listenTo(virtualCollection, 'sort update reset change', () => el.requestUpdate())\r\n}\r\n\r\nconst ensureViewClass = ElementClass => {\r\n  if (ElementClass[isClassDecorated]) return ElementClass\r\n  ElementClass[isClassDecorated] = true\r\n  const ViewClass = class extends ElementClass {\r\n    connectedCallback() {\r\n      super.connectedCallback && super.connectedCallback()\r\n      const virtualStates = this.constructor.__virtualStates\r\n      if (virtualStates) {\r\n        virtualStates.forEach(name => {\r\n          const virtualCollection = this[name]\r\n          if (virtualCollection) {\r\n            // todo: in case of previously disconnected must rebind parent collection also\r\n            bindVirtualCollection(this, virtualCollection)\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    disconnectedCallback() {\r\n      const virtualStates = this.constructor.__virtualStates\r\n      if (virtualStates) {\r\n        virtualStates.forEach(name => {\r\n          const virtualCollection = this[name]\r\n          if (virtualCollection) {\r\n            virtualCollection.stopListening()\r\n            this.stopListening(virtualCollection)\r\n          }\r\n        })\r\n      }\r\n      super.disconnectedCallback && super.disconnectedCallback()\r\n    }\r\n  }\r\n  Events.extend(ViewClass.prototype)\r\n  return ViewClass\r\n}\r\n\r\nconst registerVirtualState = (ctor, name, key, options = {}) => {\r\n  const virtualStates = ctor.__virtualStates || (ctor.__virtualStates = new Set())\r\n  virtualStates.add(name)\r\n  const desc = {\r\n    get() {\r\n      return this[key]\r\n    },\r\n    set(value) {\r\n      let virtualCollection = this[key]\r\n      if (value) {\r\n        if (!value instanceof Collection) {\r\n          throw new Error(`Error setting ${name} property: value must be a Collection`)\r\n        }\r\n      }\r\n\r\n      if (!virtualCollection) {\r\n        virtualCollection = new VirtualCollection(null, {\r\n          filter: isFunction(options.filter) ? options.filter.bind(this) : options.filter,\r\n        })\r\n        if (this.isConnected) {\r\n          bindVirtualCollection(this, virtualCollection)\r\n        }\r\n      }\r\n\r\n      virtualCollection.parent = value\r\n\r\n      this[key] = virtualCollection\r\n      this.requestUpdate(name, virtualCollection)\r\n    },\r\n    configurable: true,\r\n    enumerable: true,\r\n  }\r\n  Object.defineProperty(ctor.prototype, name, desc)\r\n  if (ctor.createProperty) {\r\n    ctor.createProperty(name, { type: Object, noAccessor: true })\r\n  }\r\n}\r\n\r\nexport const virtualState = (optionsOrProtoOrDescriptor, fieldName, options) => {\r\n  const isLegacy = typeof fieldName === 'string'\r\n  if (!isLegacy && typeof optionsOrProtoOrDescriptor.kind !== 'string') {\r\n    // passed options\r\n    return function(protoOrDescriptor) {\r\n      return virtualState(protoOrDescriptor, fieldName, optionsOrProtoOrDescriptor)\r\n    }\r\n  }\r\n\r\n  const name = isLegacy ? fieldName : optionsOrProtoOrDescriptor.key\r\n  const key = typeof name === 'symbol' ? Symbol() : `__${name}`\r\n  if (!isLegacy) {\r\n    const { kind, placement, descriptor, initializer } = optionsOrProtoOrDescriptor\r\n    return {\r\n      kind,\r\n      placement,\r\n      descriptor,\r\n      initializer,\r\n      key,\r\n      finisher(ctor) {\r\n        registerVirtualState(ctor, name, key, options)\r\n        return ensureViewClass(ctor)\r\n      },\r\n    }\r\n  }\r\n  registerVirtualState(optionsOrProtoOrDescriptor.constructor, name, key, options)\r\n}\r\n","import { Component, html, property } from 'component'\r\nimport './paging-bar'\r\nimport { virtualState } from './virtualState'\r\n\r\nconst ColorItem = model => {\r\n  const { id, hex, name } = model.attributes\r\n\r\n  return html`\r\n    <a\r\n      class=\"colors__item list-group-item list-group-item-action flex-column align-items-start\"\r\n      href=${`#colors/${id}`}\r\n    >\r\n      <div class=\"d-flex w-100 justify-content-start\">\r\n        <span class=\"colors__swatch mt-2\" style=${`background-color: ${hex}`}></span>\r\n        <div>\r\n          <h5>${name}</h5>\r\n          <p class=\"mb-1\">${hex}</p>\r\n        </div>\r\n      </div></a\r\n    >\r\n  `\r\n}\r\n\r\nexport default class ColorsView extends Component {\r\n  @property({ type: Number })\r\n  page = 1\r\n\r\n  @virtualState({\r\n    filter: function(color, index) {\r\n      const lastIndex = this.filter.start + this.filter.limit\r\n      return index >= this.filter.start && index < lastIndex\r\n    },\r\n  })\r\n  colors\r\n\r\n  filter = { start: 0, limit: 20 }\r\n\r\n  updateState() {\r\n    this.filter.start = (this.page - 1) * this.filter.limit\r\n    if (this.colors) {\r\n      this.colors.updateFilter()\r\n    }\r\n  }\r\n\r\n  shouldUpdate(changedProperties) {\r\n    if (changedProperties.has('page')) {\r\n      this.updateState()\r\n    }\r\n    return super.shouldUpdate(changedProperties)\r\n  }\r\n\r\n  render() {\r\n    const colors = this.colors\r\n\r\n    return html`\r\n      <div class=\"colors colors--index container\">\r\n        <div class=\"page-header\">\r\n          <a href=\"#colors/new\" class=\"btn btn-primary float-right mt-2\">Create</a>\r\n          <h1>Colors: Index</h1>\r\n        </div>\r\n        <div class=\"colors__list\">\r\n          <div class=\"list-group\">${colors.map(ColorItem)}</div>\r\n        </div>\r\n        <div class=\"colors__footer mt-3 d-flex justify-content-center\">\r\n          <paging-bar\r\n            .count=${colors ? colors.parent.length : 0}\r\n            .start=${this.filter.start}\r\n            .limit=${this.filter.limit}\r\n          ></paging-bar>\r\n        </div>\r\n      </div>\r\n    `\r\n  }\r\n}\r\n\r\ncustomElements.define('colors-view', ColorsView)\r\n","import { Model } from 'nextbone'\r\nimport { localStorage } from 'nextbone/localstorage'\r\n\r\n@localStorage('colors')\r\nclass Color extends Model {\r\n  urlRoot = '/api/colors'\r\n\r\n  static defaults = {\r\n    active: false,\r\n  }\r\n\r\n  validate(attrs = {}) {\r\n    const errors = []\r\n\r\n    if (!attrs.name) {\r\n      errors.push('Missing \"name\" field')\r\n    }\r\n\r\n    if (!attrs.hex) {\r\n      errors.push('Missing \"hex\" field')\r\n    }\r\n\r\n    return errors.length > 0 ? errors : undefined\r\n  }\r\n}\r\n\r\nexport default Color\r\n","import * as Backbone from 'nextbone';\r\nimport Model from './model';\r\n\r\nexport default class extends Backbone.Collection {\r\n  url = '../api/colors/fixture.json';\r\n\r\n  localStorage = Model.prototype.localStorage;\r\n\r\n  static model = Model;\r\n}\r\n","import { Storage } from 'nextbone-state';\r\nimport Model from './model';\r\nimport Collection from './collection';\r\n\r\nclass ColorsStorage extends Storage {\r\n  static model = Model;\r\n\r\n  static collection = Collection;\r\n}\r\n\r\nexport default new ColorsStorage();\r\n","import { Route, elProperty } from 'nextbone-routing'\r\nimport ColorsView from './colors-view'\r\nimport storage from '../storage'\r\n\r\nexport default class extends Route {\r\n  static component = ColorsView\r\n\r\n  @elProperty\r\n  colors\r\n\r\n  @elProperty\r\n  page\r\n\r\n  activate(transition) {\r\n    const pageParam = transition.query.page\r\n    this.page = (pageParam && parseFloat(pageParam)) || 1\r\n    return storage.findAll().then(colors => {\r\n      this.colors = colors\r\n    })\r\n  }\r\n\r\n  updateEl(transition) {\r\n    // updateView is called when the route is already rendered (route.view !== undefined)\r\n    const pageParam = transition.query.page\r\n    const page = (pageParam && parseFloat(pageParam)) || 1\r\n    this.el.page = page\r\n    // the default behavior is the current view be replaced by a new view instance\r\n    // by returning true, the current view is is not destroyed / removed\r\n    return true\r\n  }\r\n}\r\n","import { Component, html } from 'component'\r\nimport nprogress from 'nprogress'\r\nimport { Radio } from 'nextbone-radio'\r\nimport ModalService from '../../modal/service'\r\nimport FlashesService from '../../flashes/service'\r\nimport { state, event } from 'nextbone'\r\n\r\nexport default class ColorView extends Component {\r\n  @state\r\n  model\r\n\r\n  @event('click', '.colors__toggle')\r\n  handleToggle() {\r\n    this.model.set('active', !this.model.get('active'))\r\n    this.model.save().catch(() => this.handleToggleFailure())\r\n  }\r\n\r\n  handleToggleFailure() {\r\n    this.model.set('active', this.model.previous('active'))\r\n  }\r\n\r\n  @event('click', '.colors__destroy')\r\n  handleDestroy() {\r\n    ModalService.confirm({\r\n      title: 'Confirm Color Destruction',\r\n      text: `Are you sure you want to destroy ${this.model.get('name')}?`,\r\n    }).then(confirmed => {\r\n      if (!confirmed) {\r\n        return\r\n      }\r\n\r\n      nprogress.start()\r\n\r\n      return this.model.destroy({ wait: true }).then(() => this.handleDestroySuccess())\r\n    })\r\n  }\r\n\r\n  handleDestroySuccess() {\r\n    Radio.channel('router').request('transitionTo', 'colors.index')\r\n    FlashesService.request('add', {\r\n      timeout: 5000,\r\n      type: 'info',\r\n      title: `It's gone!`,\r\n      body: `You have deleted ${this.model.get('name')}.`,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { id, hex, active, name } = this.model.attributes\r\n    return html`\r\n      <div class=\"colors colors--show container\">\r\n        <div class=\"page-header\">\r\n          <div class=\"btn-toolbar float-right mt-2\" role=\"toolbar\">\r\n            <div class=\"btn-group mr-2\">\r\n              <button class=\"colors__destroy btn btn-danger\">Destroy</button>\r\n            </div>\r\n            <div class=\"btn-group\">\r\n              <button class=\"colors__toggle btn btn-light\">\r\n                ${active ? 'Deactivate' : 'Activate'}</button\r\n              ><a href=${`#colors/${id}/edit`} class=\"btn btn-light\">Edit</a>\r\n            </div>\r\n          </div>\r\n          <h1>Colors: Show</h1>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-3\">\r\n            <div class=\"thumbnail\">\r\n              <div class=\"colors__thumbnail\" style=${`background-color: ${hex}`}></div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-md-9\">\r\n            <div class=\"list-group\">\r\n              <div class=\"list-group-item\">\r\n                <h4 class=\"mb-1\">Name</h4>\r\n                <p class=\"mb-1\">${name}</p>\r\n              </div>\r\n              <div class=\"list-group-item\">\r\n                <h4 class=\"mb-1\">Hex</h4>\r\n                <p class=\"mb-1\">${hex}</p>\r\n              </div>\r\n              <div class=\"list-group-item\">\r\n                <h4 class=\"mb-1\">State</h4>\r\n                <p class=\"mb-1\">${active ? 'Active' : 'Inactive'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `\r\n  }\r\n}\r\n\r\ncustomElements.define('color-view', ColorView)\r\n","import { Route, elProperty } from 'nextbone-routing'\r\nimport ColorView from './color-view'\r\nimport storage from '../storage'\r\n\r\nexport default class extends Route {\r\n  static component = ColorView\r\n\r\n  static providedContexts = {\r\n    colorModel: { property: 'model' },\r\n  }\r\n\r\n  @elProperty\r\n  model\r\n\r\n  activate(transition) {\r\n    return storage.find(transition.params.colorid).then(model => {\r\n      this.model = model\r\n    })\r\n  }\r\n}\r\n","import { Component, html, property } from 'component'\r\nimport _ from 'underscore'\r\nimport { state, event } from 'nextbone'\r\nimport Color from '../model'\r\nimport { formBind } from 'nextbone/formbind'\r\n\r\n@formBind\r\nclass ColorEditView extends Component {\r\n  @state({ copy: true })\r\n  model = new Color()\r\n\r\n  @property({ type: Object })\r\n  errors\r\n\r\n  @event('submit', 'form')\r\n  handleSubmit(e) {\r\n    e.preventDefault()\r\n    if (!this.model.isValid()) {\r\n      this.errors = this.model.validationError\r\n      return\r\n    }\r\n    this.trigger('save:color', this.model)\r\n  }\r\n\r\n  hasUnsavedChanges(pristine) {\r\n    return (\r\n      !(pristine.isNew() && !this.model.isNew()) &&\r\n      !_.isEqual(\r\n        _.omit(pristine.attributes, 'id', 'active'),\r\n        _.omit(this.model.attributes, 'id', 'active'),\r\n      )\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const errors = this.errors\r\n    const isNew = this.model.isNew()\r\n    return html`\r\n      <div class=\"colors colors--edit container\">\r\n        <div class=\"page-header\"><h1>Colors: ${isNew ? 'Create' : 'Edit'}</h1></div>\r\n        <form class=\"colors__form form-horizontal well\" role=\"form\">\r\n          ${errors\r\n            ? html`\r\n                <div class=\"alert alert-warning\">\r\n                  <ul>\r\n                    ${errors.map(\r\n                      (item, i) =>\r\n                        html`\r\n                          <li>${item}</li>\r\n                        `,\r\n                    )}\r\n                  </ul>\r\n                </div>\r\n              `\r\n            : undefined}\r\n          <div class=\"form-group\">\r\n            <label class=\"col-sm-1 control-label\" for=\"name\">Name</label>\r\n            <div class=\"col-sm-11\">\r\n              <input\r\n                class=\"form-control\"\r\n                name=\"name\"\r\n                type=\"text\"\r\n                placeholder=\"blue\"\r\n                .value=${this.model.get('name') || null}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label class=\"col-sm-1 control-label\" for=\"hex\">Hex</label>\r\n            <div class=\"col-sm-11\">\r\n              <input\r\n                class=\"form-control\"\r\n                name=\"hex\"\r\n                type=\"text\"\r\n                placeholder=\"#00f\"\r\n                .value=${this.model.get('hex') || null}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <div class=\"col-sm-offset-1 col-sm-11\">\r\n              <button type=\"submit\" class=\"btn btn-default\">Submit</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    `\r\n  }\r\n}\r\n\r\nexport default ColorEditView\r\n\r\ncustomElements.define('color-edit-view', ColorEditView)\r\n","import { Route, elProperty, elEvent } from 'nextbone-routing'\r\nimport View from './color-edit-view'\r\nimport ModalService from '../../modal/service'\r\nimport storage from '../storage'\r\nimport nprogress from 'nprogress'\r\n\r\nexport default class extends Route {\r\n  static component = View\r\n\r\n  @elProperty\r\n  model\r\n\r\n  activate() {\r\n    this.model = this.context.colorModel\r\n  }\r\n\r\n  deactivate(transition) {\r\n    if (this.el.hasUnsavedChanges(this.model)) {\r\n      return ModalService.confirm({\r\n        title: 'You have unsaved changes',\r\n        text: `Are you sure you want to exit without saving?`,\r\n        yes: 'Yes, discard changes',\r\n        no: 'No, abort exit',\r\n      }).then(confirmed => {\r\n        if (!confirmed) {\r\n          transition.cancel()\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  @elEvent('save:color', { dom: false })\r\n  saveColor(model) {\r\n    nprogress.start()\r\n    storage.save(model).then(() => {\r\n      this.$router.transitionTo('colors.show', { colorid: model.id })\r\n    })\r\n  }\r\n}\r\n","import { Route } from 'nextbone-routing';\r\nimport ColorsIndexRoute from './index/route';\r\nimport ColorsShowRoute from './show/route';\r\nimport ColorsEditRoute from './edit/route';\r\nimport ColorsCreateRoute from './create/route';\r\nimport storage from './storage';\r\n\r\nexport default class extends Route {\r\n  activate() {\r\n    // ensure data is loaded for all children routes\r\n    return storage.findAll({ ajaxSync: true });\r\n  }\r\n\r\n  static childRoutes = {\r\n    'colors.index': ColorsIndexRoute,\r\n    'colors.show': ColorsShowRoute,\r\n    'colors.edit': ColorsEditRoute,\r\n    'colors.create': ColorsCreateRoute,\r\n  };\r\n}\r\n","import Color from '../model'\r\nimport ColorEditRoute from '../edit/route'\r\n\r\n\r\nexport default class extends ColorEditRoute {\r\n  activate() {\r\n    this.model = new Color()\r\n  }\r\n}\r\n"],"sourceRoot":""}